(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(14),a=t.n(r),c=t(3),o=t(1),u=t(0),i=function(e){var n=e.changeHandler,t=e.filter;return Object(u.jsxs)("div",{children:["Filter shown with: ",Object(u.jsx)("input",{onChange:n,value:t})]})},l=function(e){var n=e.submitHandler,t=e.nameChangeHandler,r=e.numberChangeHandler,a=e.nameValue,c=e.numberValue;return Object(u.jsxs)("form",{onSubmit:n,children:[Object(u.jsxs)("div",{children:["Name:  ",Object(u.jsx)("input",{onChange:t,value:a})]}),Object(u.jsxs)("div",{children:["Number:  ",Object(u.jsx)("input",{onChange:r,value:c})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"Add"})})]})},s=function(e){var n=e.person,t=e.deleteHandler;return Object(u.jsxs)("li",{children:[n.name," ",n.number," ",Object(u.jsx)("button",{value:n.id,onClick:t,children:"Delete"})," "]})},d=function(e){var n=e.personList,t=e.deleteHandler;return Object(u.jsx)("ul",{children:n.map((function(e){return Object(u.jsx)(s,{person:e,deleteHandler:t},e.name)}))})},f=t(4),b=t.n(f),j="/api/persons",m=function(){return b.a.get(j).then((function(e){return e.data}))},h=function(e){return b.a.post(j,e).then((function(e){return e.data}))},v=function(e,n){return b.a.put("".concat(j,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){return b.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))},O=function(e){var n=e.message;return console.log(n),null===n?null:(console.log(n),"success"===n.type?Object(u.jsx)("div",{className:"success",children:n.text}):"error"===n.type?Object(u.jsx)("div",{className:"error",children:n.text}):void 0)},g=function(){var e=Object(o.useState)([]),n=Object(c.a)(e,2),t=n[0],r=n[1],a=Object(o.useState)("Enter Name Here..."),s=Object(c.a)(a,2),f=s[0],b=s[1],j=Object(o.useState)("Enter Number Here..."),g=Object(c.a)(j,2),x=g[0],H=g[1],w=Object(o.useState)(""),y=Object(c.a)(w,2),C=y[0],N=y[1],k=Object(o.useState)(null),I=Object(c.a)(k,2),S=I[0],D=I[1];Object(o.useEffect)((function(){m().then((function(e){r(e)}))}),[]);var E=function(e,n){var a=e.id;console.log(n),console.log("Updating ",e.name," with new number: ",n),v(a,n).then((function(e){r(t.map((function(n){return n.id!==a?n:e})))})).catch((function(e){D({type:"error",text:"Information of ".concat(n.name," has already been removed from server")}),setTimeout((function(){D(null)}),5e3);var c=t.filter((function(e){return e.id!==a}));r(c)}))},V=""===N?t:t.filter((function(e){return e.name.toUpperCase().includes(C.toUpperCase())}));return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(O,{message:S}),Object(u.jsx)(i,{changeHandler:function(e){N(e.target.value)},filter:C}),Object(u.jsx)("h3",{children:"Add New"}),Object(u.jsx)(l,{submitHandler:function(e){e.preventDefault();var n={name:f,number:x};t.some((function(e){return e.name===n.name}))?window.confirm("".concat(n.name," is already added to phonebook, replace old number with new one?"))&&E(t.find((function(e){return e.name===n.name})),n):(h(n).then((function(e){D({type:"success",text:"Added ".concat(n.name)}),setTimeout((function(){D(null)}),5e3),r(t.concat(e))})),b(""),H(""))},nameChangeHandler:function(e){b(e.target.value)},numberChangeHandler:function(e){H(e.target.value)},nameValue:f,numberValue:x}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(d,{personList:V,deleteHandler:function(e){console.log(e.target.value);var n=t.find((function(n){return n.id===parseInt(e.target.value)}));window.confirm("Delete ".concat(n.name,"?"))&&(console.log("Deleting: ",e.target.value),p(e.target.value).then((function(n){var a=t.filter((function(n){return n.id!==parseInt(e.target.value)}));r(a)})).catch((function(a){D({type:"error",text:"Information of ".concat(n.name," has already been removed from server")}),setTimeout((function(){D(null)}),5e3);var c=t.filter((function(n){return n.id!==parseInt(e.target.value)}));r(c)})))}})]})};t(38);a.a.render(Object(u.jsx)(g,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.23fdfba6.chunk.js.map